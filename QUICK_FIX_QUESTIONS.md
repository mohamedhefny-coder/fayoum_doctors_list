# ๐ง ุฅุตูุงุญ ุณุฑูุน: ูุดููุฉ ุชููู ุงูุชุทุจูู ุนูุฏ ุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ

## โก ุงูุญู ุงูุณุฑูุน

**ุงูุฎุทูุฉ ุงููุญูุฏุฉ ุงููุทููุจุฉ:**

1. ุงูุชุญ [Supabase Dashboard](https://app.supabase.com) โ ุงุฎุชุฑ ูุดุฑูุนู
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุญุชูู ุงูููู `fix_doctor_questions_rls.sql` ูุงูุตูู
4. ุงุถุบุท **Run** ุฃู **Ctrl+Enter**

โ **ุงูุชูู!** ุงูุขู ุงูุชุทุจูู ูุฌุจ ุฃู ูุนูู ุจุดูู ุตุญูุญ.

---

## ๐ ูุงุฐุง ุญุฏุซุ

ุงูุณุจุจ ุงูุฑุฆูุณู ููุชููู ูู ุฃู **ุณูุงุณุงุช Row Level Security (RLS)** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุช ุชููุน ุงูุทุจูุจ ูู ุชุญุฏูุซ ุงูุฃุณุฆูุฉ.

**ุงููุดููุฉ:**
- ุงูุณูุงุณุงุช ุงููุฏููุฉ ูุงูุช ุชุชุญูู ูู: `doctor_id = auth.uid()`
- ููู ูู ุจุนุถ ุงูุญุงูุงุช `doctors.id โ auth.uid()`
- ูุฐูู ูุงูุช ุงูุทูุจุงุช ุชูุฑูุถ

**ุงูุญู:**
- ุงูุณูุงุณุงุช ุงูุฌุฏูุฏุฉ ุชุชุญูู ุจุทุฑููุชูู:
  1. `doctor_id = auth.uid()` (ุงูุญุงูุฉ ุงููุซุงููุฉ)
  2. ุฃู ูุทุงุจูุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจูู `auth.users` ู `doctors`

---

## ๐งช ููู ุชุชุญูู ูู ุงูุฅุตูุงุญุ

1. ุงูุชุญ ุงูุชุทุจูู ูุณุฌู ุฏุฎูู ูุทุจูุจ
2. ุงุฐูุจ ุฅูู **ุงูููู ุงูุดุฎุตู** โ **ุงูุฃุณุฆูุฉ ูุงูุงุณุชูุณุงุฑุงุช**
3. ุฌุฑูุจ ุงูุฅุฌุงุจุฉ ุนูู ุณุคุงู ูุงุถุบุท **ุญูุธ**
4. โ ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ ุฎุถุฑุงุก
5. โ ูุฌุจ ุฃู ุชุชุญุฏุซ ุงููุงุฆูุฉ ุชููุงุฆูุงู

---

## ๐ ุงูุชุญุณููุงุช ุงูุฃุฎุฑู

ุชู ุฃูุถุงู ุชุญุณูู ุงูููุฏ ููููู ุฃูุซุฑ ุฃูุงูุงู:

### โ ูู `doctor_database_service.dart`:
- ุฅุถุงูุฉ `try-catch` blocks ูุฌููุน ุฏูุงู ุงูุฃุณุฆูุฉ
- ุฅุถุงูุฉ `.select()` ููุชุญูู ูู ูุฌุงุญ ุงูุนูููุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

### โ ูู ูุงุฌูุงุช ุงููุณุชุฎุฏู:
- ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- ุฑุณุงุฆู ุชูุถูุญูุฉ ูููุณุชุฎุฏู
- ููุน ุญูุธ ุฅุฌุงุจุงุช ูุงุฑุบุฉ

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

ุฅุฐุง ูู ูุนูู ุงูุฅุตูุงุญุ ุชุญูู ูู:

1. **ุงูุทุจูุจ ูุณุฌู ุฏุฎููุ**
   - ุชุฃูุฏ ูู ูุฌูุฏ session ุตุญูุญ ูู Supabase

2. **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุชุทุงุจูุ**
   - ุชุญูู ูู ุฃู `doctors.email` ูุณุงูู `auth.users.email`

3. **ุงูุฌุฏูู ููุฌูุฏุ**
   - ููุฐ `add_doctor_questions_table.sql` ุฃููุงู ุฅุฐุง ูู ูุชู

4. **ุฃุฎุทุงุก ูู consoleุ**
   - ุฑุงุฌุน ุงูููู [FIX_QUESTIONS_CRASH.md](./FIX_QUESTIONS_CRASH.md) ููุชูุงุตูู

---

## ๐ ุงููููุงุช ุฐุงุช ุงูุตูุฉ

- `fix_doctor_questions_rls.sql` - **ุงูุฅุตูุงุญ ุงูุฑุฆูุณู** โญ
- `add_doctor_questions_table.sql` - ุฅูุดุงุก ุงูุฌุฏูู
- `FIX_QUESTIONS_CRASH.md` - ุชูุซูู ููุตู

---

**๐ก ููุงุญุธุฉ:** ุชู ุฅุตูุงุญ ุฌููุน ุงูุชุญุฐูุฑุงุช ูู ุงูููุฏ. ุงูุชุทุจูู ุงูุขู ููุฑ ูู `flutter analyze` ุจุฏูู errors ุฃู warnings.
