# ุฏููู ุฅุนุฏุงุฏ ูุธุงู Admin Panel

## ๐ ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง:

### 1. Backend & Services
- โ `lib/services/admin_service.dart` - ุฎุฏูุฉ ุฅุฏุงุฑุฉ ุงููุฏูุฑูู ูุงูุฃุทุจุงุก
- โ `admin_setup.sql` - ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุทููุจุฉ

### 2. Screens
- โ `lib/screens/admin_login_screen.dart` - ุดุงุดุฉ ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ
- โ `lib/screens/admin_panel_screen.dart` - ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ
- โ `lib/screens/admin_add_doctor_screen.dart` - ุดุงุดุฉ ุฅุถุงูุฉ ุทุจูุจ ุฌุฏูุฏ
- โ `lib/screens/doctor_login_screen.dart` - ุชู ุชุนุฏูููุง (ุฅุฒุงูุฉ ุฑุงุจุท ุงูุชุณุฌูู)

---

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ:

### ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ Supabase

1. **ุงูุชุญ Supabase Dashboard** โ ุงุฐูุจ ุฅูู **SQL Editor**

2. **ููุฐ ุงูุฃูุงูุฑ ุงูุชุงููุฉ** ูู ููู `admin_setup.sql`:
   ```sql
   -- ุฅูุดุงุก ุฌุฏูู ุงููุฏูุฑูู
   CREATE TABLE IF NOT EXISTS public.admins (
     id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
     email TEXT UNIQUE NOT NULL,
     created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
   );
   
   -- ุชูุนูู RLS
   ALTER TABLE public.admins ENABLE ROW LEVEL SECURITY;
   
   -- ุงูุณูุงุณุงุช
   CREATE POLICY "Only admins can view admins table"
     ON public.admins FOR SELECT
     USING (auth.uid() IN (SELECT id FROM public.admins));
   
   DROP POLICY IF EXISTS "Anyone can insert a new doctor during signup" ON public.doctors;
   
   CREATE POLICY "Only admins can insert new doctors"
     ON public.doctors FOR INSERT
     WITH CHECK (auth.uid() IN (SELECT id FROM public.admins));
   ```

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุฃูู ูุฏูุฑ

1. **ุงุฐูุจ ุฅูู** Authentication โ Users โ **Add User**

2. **ุฃุฏุฎู ุงูุจูุงูุงุช:**
   - Email: `admin@fayoumdoctors.com` (ุฃู ุฃู ุจุฑูุฏ ุชุฑูุฏู)
   - Password: ูููุฉ ูุฑูุฑ ูููุฉ (ุงุญูุธูุง!)
   - โ ูุนูู **Auto Confirm User**

3. **ุงูุณุฎ ุงูู UUID** ุงูุฐู ุธูุฑ ูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู

4. **ุงุฑุฌุน ุฅูู SQL Editor** ูููุฐ:
   ```sql
   INSERT INTO public.admins (id, email)
   VALUES ('UUID-ุงูุฐู-ูุณุฎุชู', 'admin@fayoumdoctors.com');
   ```

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงููุธุงู

1. **ุดุบูู ุงูุชุทุจูู:**
   ```bash
   flutter run
   ```

2. **ูููุตูู ุฅูู ููุญุฉ ุงููุฏูุฑ:**
   - ููููู ุฅุถุงูุฉ ุฒุฑ ูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ ุฃู
   - ุงูุงูุชูุงู ูุจุงุดุฑุฉ ุฅูู `AdminLoginScreen`

3. **ุณุฌู ุฏุฎูู ููุฏูุฑ** ุจุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชู ุฃูุดุฃุชูุง

4. **ุฌุฑุจ ุฅุถุงูุฉ ุทุจูุจ ุฌุฏูุฏ:**
   - ูู ููุญุฉ ุงููุฏูุฑ โ ุงุถุบุท "ุฅุถุงูุฉ ุทุจูุจ"
   - ุงููุฃ ุงูุจูุงูุงุช ุงููุทููุจุฉ
   - ุณุชุธูุฑ ูู ุฑุณุงูุฉ ุจุงูุจูุงูุงุช ุงูุชู ูุฌุจ ุฅุนุทุงุคูุง ููุทุจูุจ

---

## ๐ ููู ูุนูู ุงููุธุงู:

### ูููุฏูุฑ:
1. ูุณุฌู ุฏุฎูู ูู `AdminLoginScreen`
2. ูุฏุฎู ุฅูู ููุญุฉ ุงูุชุญูู `AdminPanelScreen`
3. ูุถูู ุฃุทุจุงุก ุฌุฏุฏ ูู `AdminAddDoctorScreen`
4. ููููู:
   - ุนุฑุถ ุฌููุน ุงูุฃุทุจุงุก
   - ุฅุถุงูุฉ ุทุจูุจ ุฌุฏูุฏ
   - ุญุฐู ุทุจูุจ
   - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ูุฑูุฑ ุทุจูุจ

### ููุทุจูุจ:
1. ูุญุตู ุนูู Email + Password ูู ุงููุฏูุฑ
2. ูุณุฌู ุฏุฎูู ูู `DoctorLoginScreen`
3. ูุฏุฎู ุฅูู ูููู ุงูุดุฎุตู `DoctorProfileScreen`
4. ูููู ุจูุงูุงุชู (ุตูุฑุฉุ ูุนูููุงุช ุฅุถุงููุฉุ ุฅูุฎ)

---

## ๐ฑ ุฅุถุงูุฉ ุฒุฑ ุงูุฏุฎูู ูููุฏูุฑ ูู ุงูุชุทุจูู

ููููู ุฅุถุงูุฉ ุฒุฑ ูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ ูููุตูู ุฅูู ููุญุฉ ุงููุฏูุฑ:

```dart
// ูู main.dart ุฃู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
import 'screens/admin_login_screen.dart';

// ุฃุถู ุฒุฑ:
TextButton(
  onPressed: () {
    Navigator.of(context).push(
      MaterialPageRoute(
        builder: (context) => const AdminLoginScreen(),
      ),
    );
  },
  child: const Text('ุฏุฎูู ุงููุฏูุฑ'),
)
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ:

1. **ุงูุฃูุงู:**
   - ูุง ุชุดุงุฑู ุจูุงูุงุช ุฏุฎูู ุงููุฏูุฑ ูุน ุฃุญุฏ
   - ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ
   - ุบููุฑ ูููุฉ ุงููุฑูุฑ ุจุดูู ุฏูุฑู

2. **ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก:**
   - ูู ุทุจูุจ ูุญุชุงุฌ Email ูุฑูุฏ
   - ุฑูู ุงูุชุฑุฎูุต ูุฌุจ ุฃู ูููู ูุฑูุฏ
   - ุงุญูุธ ูููุงุช ุงููุฑูุฑ ุงููุคูุชุฉ ูุฃุนุทูุง ููุฃุทุจุงุก

3. **ูุตุงุฆุญ:**
   - ุฃูุดุฆ Excel sheet ูุชุณุฌูู ุจูุงูุงุช ุงูุฃุทุจุงุก
   - ุฃุฑุณู ุงูุจูุงูุงุช ููุฃุทุจุงุก ุนุจุฑ ูุงุชุณุงุจ ุฃู ุจุฑูุฏ ุฅููุชุฑููู
   - ุงุทูุจ ูู ุงูุฃุทุจุงุก ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจุนุฏ ุฃูู ุชุณุฌูู ุฏุฎูู

---

## ๐ฏ ุงูููุฒุงุช ุงููุชุงุญุฉ:

โ ููุญุฉ ุชุญูู ูุงููุฉ ูููุฏูุฑ  
โ ุฅุถุงูุฉ ุฃุทุจุงุก ุจุถุบุทุฉ ุฒุฑ  
โ ุญุฐู ุญุณุงุจุงุช ุงูุฃุทุจุงุก  
โ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ  
โ ุนุฑุถ ูุงุฆูุฉ ุฌููุน ุงูุฃุทุจุงุก  
โ ุนุฏุฏ ุงูุฃุทุจุงุก ุงููุณุฌููู  
โ ุญูุงูุฉ ูุงููุฉ ุจู Row Level Security  

---

## ๐ ูู ุญุงูุฉ ุงููุดุงูู:

### ุงููุดููุฉ: "ูุฐุง ุงูุญุณุงุจ ููุณ ุญุณุงุจ ูุฏูุฑ"
**ุงูุญู:** ุชุฃูุฏ ูู ุฅุถุงูุฉ UUID ุงููุณุชุฎุฏู ูู ุฌุฏูู `admins`

### ุงููุดููุฉ: "ูุดู ุฅูุดุงุก ุญุณุงุจ ุงูุทุจูุจ"
**ุงูุญู:** ุชุญูู ูู ุฃู:
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ูุณุชุฎุฏู ูู ูุจู
- ุฑูู ุงูุชุฑุฎูุต ูุฑูุฏ
- ุงูุงุชุตุงู ุจู Supabase ูุนูู

### ุงููุดููุฉ: Admin API ูุง ูุนูู
**ุงูุญู:** ุชุฃูุฏ ูู ุฃู Service Role Key ููุฌูุฏ ูู ุฅุนุฏุงุฏุงุช Supabase (ูุชู ุงุณุชุฎุฏุงูู ุชููุงุฆูุงู ูู ุฎูุงู SDK)

---

## ๐ ููุฏุนู:
ุชูุงุตู ูุน ุงููุทูุฑ ุฃู ุฑุงุฌุน ุงูุชูุซูู ุงูุฑุณูู ูู Supabase:
https://supabase.com/docs
